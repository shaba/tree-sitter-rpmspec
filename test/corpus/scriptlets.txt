===============================================================================
Prep Section (Empty)
===============================================================================

%prep

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)))

===============================================================================
Prep Section (%setup)
===============================================================================

%prep
%setup -q

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (macro_builtin)
        (setup_flag)))))

===============================================================================
Prep Section (%autosetup)
===============================================================================

%prep
%autosetup

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (macro_call
        (macro_simple_expansion
          (identifier))))))

===============================================================================
Build section (%build)
===============================================================================

%build
%configure
%make_build

-------------------------------------------------------------------------------

(spec
  (build_scriptlet
    (section_name)
    (shell_block
      (macro_call
        (macro_simple_expansion
          (identifier)))
      (macro_call
        (macro_simple_expansion
          (identifier))))))

===============================================================================
Prep Section (%setup with flags)
===============================================================================

%prep
%setup -c -q

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (macro_builtin)
        (setup_flag)
        (setup_flag)))))

===============================================================================
Prep Section (%setup with source options)
===============================================================================

%prep
%setup -a 0 -b 1

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (macro_builtin)
        (setup_source_option
          (integer))
        (setup_source_option
          (integer))))))

===============================================================================
Prep Section (%setup with name option)
===============================================================================

%prep
%setup -n custom-directory

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (macro_builtin)
        (setup_name_option
          (word))))))

===============================================================================
Prep Section (%setup complex combination)
===============================================================================

%prep
%setup -c -n %{name} -a 1 -q

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (macro_builtin)
        (setup_flag)
        (setup_name_option
          (macro_expansion
            (identifier)))
        (setup_source_option
          (integer))
        (setup_flag)))))

===============================================================================
Prep Section (%setup standalone at top level)
===============================================================================

%setup -D -T

-------------------------------------------------------------------------------

(spec
  (setup_macro
    (macro_builtin)
    (setup_flag)
    (setup_flag)))

===============================================================================
Prep Section (%setup edge cases)
===============================================================================

%prep
%setup -C
%setup -a 10 -n "quoted directory name"

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (macro_builtin)
        (setup_flag))
      (setup_macro
        (macro_builtin)
        (setup_source_option
          (integer))
        (setup_name_option
          (quoted_string
            (quoted_string_content)))))))

===============================================================================
Prep Section (%patch basic usage)
===============================================================================

%prep
%patch 0
%patch -P 1

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (patch_macro
        (integer))
      (patch_macro
        (patch_number_option
          (integer))))))

===============================================================================
Prep Section (%patch with flags)
===============================================================================

%prep
%patch 0 -p 1 -E
%patch 1 -R -Z

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (patch_macro
        (integer)
        (patch_number_option
          (integer))
        (patch_flag))
      (patch_macro
        (integer)
        (patch_flag)
        (patch_flag)))))

===============================================================================
Prep Section (%patch with string options)
===============================================================================

%prep
%patch 0 -b .orig
%patch -P 1 -o /tmp/output

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (patch_macro
        (integer)
        (patch_string_option
          (word)))
      (patch_macro
        (patch_number_option
          (integer))
        (patch_string_option
          (word))))))

===============================================================================
Prep Section (%patch complex combination)
===============================================================================

%prep
%patch 0 -p 1 -b .backup -F 2 -E
%patch -P 2 -R -z .old

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (patch_macro
        (integer)
        (patch_number_option
          (integer))
        (patch_string_option
          (word))
        (patch_number_option
          (integer))
        (patch_flag))
      (patch_macro
        (patch_number_option
          (integer))
        (patch_flag)
        (patch_string_option
          (word))))))

===============================================================================
Prep Section (%patch standalone at top level)
===============================================================================

%patch 1 -p 1
%patch -P 0 -E

-------------------------------------------------------------------------------

(spec
  (patch_macro
    (integer)
    (patch_number_option
      (integer)))
  (patch_macro
    (patch_number_option
      (integer))
    (patch_flag)))

===============================================================================
Prep Section (%patch edge cases)
===============================================================================

%prep
%patch 10 -F 3
%patch -b "backup with spaces" -p 0

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (patch_macro
        (integer)
        (patch_number_option
          (integer)))
      (patch_macro
        (patch_string_option
          (quoted_string
            (quoted_string_content)))
        (patch_number_option
          (integer))))))
